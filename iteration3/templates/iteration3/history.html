{% extends 'iteration3/diary1.html' %}
{% if request.session.is_login %}
{% block content %}
{% load static %}
<br><br><br><br><br>
<div class="page-heading-85912" style="background-image: url('images/hero_bg_3.jpg')">
  <div class="container">
    <div class="row align-items-end">
      <div class="col-lg-12">
        <h1 class="mb-0 heading text-white">History</h1>
        <p class="mb-0 text-white">View your past entries to track your blood sugar levels and insulin used.</p>
      </div>
    </div>
  </div>
</div>
<span></span>
    <script src="/static/js/bot.js" defer></script>

<br><br>
<div class="container">
    {% if LastWeek %}
      <h3 style="text-align:center;">Recent entries.</h3>
      {% for k, v in LastWeek.items %}
      <button class="form-control collapsible" style="text-align: left;background-color: #1a4587;" type="button">
          <div class="row">
              <div class="col-4" style="text-align: left"><font color="white">{{v.Day}} {{v.DateTime}}</font></div>
              <div class="col-4" style="text-align: center"><font color="white">{{v.Comment}}</font></div>
              <div class="col-4" style="text-align: right"><font color="white">Total Carbs: {{v.Carbs}}</font></div>
          </div>
      </button>
      <div class="content col-30" style="font-size: 14;">
          <br/>
          {% for row in v.rows %}
          <div class="row">

              {% for each in row %}

<!--                      Quantity-->
                {% if forloop.counter == 1 %}
                  <div class="col-lg-0">
                      &nbsp;&nbsp;&nbsp;&nbsp;{{ each }}
                  </div>

<!--                      Category/Description-->
                {% elif forloop.counter < 4 %}
                  <div class="col-lg-2">
                      {{ each }}
                  </div>

<!--                      Portion-->
                {% elif forloop.counter == 4 %}
                  <div class="col-lg-2">
                      {{ each }}
                  </div>

<!--                      Carbohydrates-->
              {% else %}
                  <div class="col-lg-3">
                      {{ each }}
                  </div>

              {% endif %}
              <br/><br/>
            {% endfor %}
          </div>
          {% endfor %}

          <br/>
          <div class="row" style="display: in-line;">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Blood Sugar:&nbsp;&nbsp;&nbsp;
                <meter min="2" max="30" low="4" high="25" value="{{v.BSL}}"></meter>
              &nbsp;&nbsp;&nbsp;
              {{v.BSL}} mmol/L
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              Insulin:&nbsp;&nbsp;&nbsp;<meter style="display: inline" min="2" max="25" low="4" high="15" value="{{v.Insulin}}"></meter>
              &nbsp;&nbsp;&nbsp;{{v.Insulin}} units
          </div>
          <br/>
      </div>
      {% endfor %}
  </div>
              {% endif %}
<br/>
<br/>
{% if LastMonth %}
  <div class="container">
      <h3 style="text-align:center;">Older entries.</h3>
      {% for k, v in LastMonth.items %}
      <button class="form-control collapsible" style="text-align: left;background-color: #1a4587;" type="button">
          <div class="row">
              <div class="col-4" style="text-align: left"><font color="white">{{v.Day}} {{v.DateTime}}</font></div>
              <div class="col-4" style="text-align: center"><font color="white">{{v.Comment}}</font></div>
              <div class="col-4" style="text-align: right"><font color="white">Total Carbs: {{v.Carbs}}</font></div>
          </div>
      </button>
      <div class="content col-30" style="font-size: 14;">
          <br/>
          {% for row in v.rows %}
          <div class="row">

              {% for each in row %}

<!--                      Quantity-->
                {% if forloop.counter == 1 %}
                  <div class="col-lg-0">
                      &nbsp;&nbsp;&nbsp;&nbsp;{{ each }}
                  </div>

<!--                      Category/Description-->
                {% elif forloop.counter < 4 %}
                  <div class="col-lg-2">
                      {{ each }}
                  </div>

<!--                      Portion-->
                {% elif forloop.counter == 4 %}
                  <div class="col-lg-2">
                      {{ each }}
                  </div>

<!--                      Carbohydrates-->
              {% else %}
              <div class="col-lg-3">
                  {{ each }}
              </div>

              {% endif %}
              {% endfor %}
          </div>
          {% endfor %}
          <br/>
          <div class="row" style="display: in-line;">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Blood Sugar:&nbsp;&nbsp;&nbsp;
                <meter min="2" max="30" low="4" high="25" value="{{v.BSL}}"></meter>
              &nbsp;&nbsp;&nbsp;
              {{v.BSL}} mmol/L
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              Insulin:&nbsp;&nbsp;&nbsp;<meter style="display: inline" min="2" max="25" low="4" high="15" value="{{v.Insulin}}"></meter>
              &nbsp;&nbsp;&nbsp;{{v.Insulin}} units
          </div>
          <br/>
      </div>
      {% endfor %}
  </div>
              {% endif %}
  <br>
<!--         BEGIN: #footer-->
        <footer id="footer">
          <div class="container">

            <!-- BEGIN: .footer-subscribe -->
            <div class="row footer-subscribe">
              <div class="col-md-6">
                <h3 class="mt-2"></h3>
              </div>
              <div class="col-md-6">
              </div>
            </div>
            <!-- END: .footer-subscribe -->

            <div class="row">
              <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                <!-- BEGIN: .widget -->
                <div class="widget">
                  <h3>Our Motivation.</h3>
                </div>
                <!-- END: .widget -->
              </div>
              <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                <!-- BEGIN: .widget -->
                <div class="widget">
<!--                  <h3>Our Job.</h3>-->
                </div>
                <!-- END: .widget -->
              </div>
              <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                <!-- BEGIN: .widget -->
                <div class="widget">
<!--                  <h3>Our Data.</h3>-->
                </div>
                <!-- END: .widget -->
              </div>
              <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                <div class="d-block">
                </div>
<!--                <div class="d-block">-->
<!--                  <p>If you have any question, please contact us at <a href="#" class="link-underline text-primary">info@diatastic.tk</a></p>-->
<!--                </div>-->
              </div>
            </div>
<!--            <div class="col-md-6 text-center text-md-left">-->
<!--                <p>Diatastic is a management tool created for diabetics, to help them manage their disability. Our website is intended to be an everyday companion for diabetics, giving them the motivation and tools necessary to live happy and healthy lives.</a></p>-->
<!--              </div>-->
            <p>Diatastic is a management tool created for diabetics, to help them manage their disability. Our website is intended to be an everyday companion for diabetics, giving them the motivation and tools necessary to live happy and healthy lives.</p>
            <p>Disclaimer: Diatastic only provides a recommendation on the insulin dosage. It should not overwrite any advice that was given to you by a medical professional.</p>
            <!-- BEGIN: .copyright -->
            <div class="row copyright">
              <div class="col-md-6 order-2 text-center text-md-right"><a href="#" class="js-top"><span class="icon-long-arrow-up mr-2"></span> Go to Top</a></div>
<!--              <div class="col-md-6 text-center text-md-left">-->
<!--                <p>Diatastic is a management tool created for diabetics, to help them manage their disability. Our website is intended to be an everyday companion for diabetics, giving them the motivation and tools necessary to live happy and healthy lives.</a></p>-->
<!--              </div>-->
            </div>
            <!-- END: .copyright -->
          </div>
        </footer>
<!--         END: #footer -->

<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.maxHeight){
          content.style.maxHeight = null;
        } else {
          content.style.maxHeight = content.scrollHeight + "px";
        }
      });
    }
</script>

<style>
    meter {
  width: 150px;
  height: 25px;
  display: inline-block;
  color: #DCD0FF;
}
meter::-webkit-meter-bar {
  background: none;
  background-color: whiteSmoke;
  box-shadow: 0 5px 5px -5px #333 inset;
}

.collapsible {
  color: black;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  text-align: left;
  outline: none;
  font-size: 15px;
  font-family: comic-sans;
}

.collapsible:after {
<!--  content: '\02C4';-->
  color: black;
  font-weight: bold;
  float: right;
  margin-left: 5px;
}

.active:after {
<!--  content: "\02C5";-->
}

.content {
  padding: 0 18px;
  width: 100%;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
}
</style>
</body>
</html>

{% endblock %}
{% else %}
<script type="text/javascript">
    window.location.href = "/please_login/";
</script>
{% endif %}