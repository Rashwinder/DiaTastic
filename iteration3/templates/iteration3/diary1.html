﻿{% load static %}
{% if request.session.is_login %}
    <head>
      <link rel="shortcut icon" href="../static/images/icons8-rh-plus-gradient-16.png">
      <!-- BEGIN: Title -->
      <title>Diatastic &mdash; Easily Manage Blood Sugar</title>
      <!-- END: Title -->

      <!-- BEGIN: Meta -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- END: Meta -->

      <!-- BEGIN: Favicon -->
      <link rel="shortcut icon" href="/static/images/icons8-rh-plus-gradient-16.png">
      <!-- END: Favicon -->

      <!-- BEGIN: Stylesheets -->
      <!-- Latest compiled and minified CSS -->
      <link rel="stylesheet" href="/static/css/bootstrap/bootstrap.css">
      <link rel="stylesheet" href="/static/css/tiny-slider.css">
      <link rel="stylesheet" href="/static/fonts/lineicons/LineIcons.min.css">
      <link rel="stylesheet" href="/static/fonts/icomoon/style.css">
      <link rel="stylesheet" href="/static/css/animate.min.css">
      <link rel="stylesheet" href="/static/css/jquery.lavalamp.css">
      <link rel="stylesheet" href="/static/css/jquery.fancybox.min.css">
      <link rel="stylesheet" href="/static/css/style.css">
      <link rel="stylesheet" href="/static/css/select.css">
      <!-- END: Stylesheets -->

    <!-- BEGIN: tree -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="/static/assets/plugins/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/assets/plugins/material_icon/icon.css"/>
    <link rel="stylesheet" href="/static/tree/styles.css">
    <!--END: tree -->


    </head>

        <header id="site-header">

          <!-- Add '.navbar_dark' class if you want the color of the text to -->
          <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">

              <!-- BEGIN: .navbar-brand -->
              <div style="margin-left:1%">
              <a class="navbar-brand" href="/index/">
                <img src="/static/images/icons8-rh-plus-gradient-32.png" ><font color="black">Diatastic</font>
              </a>
              </div>
              <!-- END: .navbar-brand -->

              <!-- BEGIN: .navbar-toggler -->
              <a href="#" class="burger-toggle-menu js-burger-toggle-menu ml-auto py-4" data-toggle="collapse" data-target="#main-nav" aria-controls="main-nav" aria-expanded="false" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
              </a>
              <!-- END: .navbar-toggler -->

              <!-- BEGIN: #main-nav -->
              <div class="collapse navbar-collapse" id="main-nav">

                <ul class="navbar-nav ml-auto">
                  <li class="nav-item">
                    <a class="nav-link" href="/index/"><font color="black">Home</font></a>

                  <li class="nav-item">
                    <a class="nav-link" href="/diary/"><font color="black">Diary</font></a>

                  <li class="nav-item">
                    <a class="nav-link" href="/history/"><font color="black">History</font></a>

                  <li class="nav-item">
                    <a class="nav-link" href="/metrics/"><font color="black">Metrics</font></a>

                  <li class="nav-item">
                    <a class="nav-link" href="/guide/"><font color="black">Beginner's Guide</font></a>

                  <li class="nav-item">
                    <a class="nav-link" href="/tips/"><font color="black">Tips and Tricks</font></a>

                  <li class="nav-item">
                    <a class="nav-link" href="/faq/"><font color="black">FAQ</font></a>

                </ul>

              </div>
              <!-- END: #main-nav -->

            </div>
                <ul style="margin-right:1%;margin-top:1%;">
                {% if request.session.is_login %}
                  <li class="nav-item">
                    <a class="nav-link" href="#"><font color="blue">Hello, {{ request.session.user_name }}!</font></a>
                  </li>
                </ul>
                <ul style="margin-right:1%;margin-top:1%;">
                  <li class="nav-item">
                      <a class="nav-link" href="/logout/"><font color="red">Log out</font></a>
                  </li>
                </ul>
                  <ul>
                {% elif request.session.signup %}
                <ul style="margin-right:1%;margin-top:1%;">
                  <li class="nav-item">
                      <a class="nav-link" href="/login/"><font color="black">Login</font>></a>
                  </li>
                {% else %}
                    <li class="nav-item">
                      <a class="nav-link" href="/login/"><font color="black">Sign Up</font></a>
                    </li>
                {% endif %}
                 </ul>
                </ul>
          </nav>
        </header>

{% block content %}
<br><br><br><br><br>
        <div class="page-heading-85912" style="background-image: url('images/hero_bg_3.jpg')">
          <div class="container">
            <div class="row align-items-end">
              <div class="col-lg-7">
                <h1 class="mb-0 heading text-white">Diary</h1>
                <p class="mb-0 text-white">Healthy living starts with your daily diet. </p>
              </div>
            </div>
          </div>
        </div>
        <span></span>
    <script src="/static/js/bot.js" defer></script>


<form method="post"
      id = "DiaryForm"
      action = "/diary/"
      data-description-url="{% url 'ajax_load_description' %}"
      data-portion-url="{% url 'ajax_load_portion' %}"
      create_view="{% url 'create_view' %}">
    {% csrf_token %}
    <div class="container">
        <br><br><br><br>
        <div style="text-align: center;display: inline;">

            <fieldset style="display: inline;margin-left:15%">
                <legend style="font-size: 14;">Date:</legend>
                    <div style="display: inline-block; width: 200px;">
                        <input id="date" type="date" class="form-control" required="required"/>
                  </div>
            </fieldset>

            <fieldset style="display: inline;">
                <legend style="font-size: 14;">Time:</legend>
                    <div style="display: inline-block; width: 200px;">
                        <input name="time" id="time" type="time" class="form-control" required="required"/>
                    </div>
            </fieldset>

            <fieldset style="display: inline;">
            <legend style="font-size: 14;">Blood Sugar Level:</legend>
          <div id="bsl_slider" class="form-class numeric-slider" style="display: inline">
                    <input name="blood_sugar_level" id="blood_sugar_level" type="number"
                           min = "1" max="30" step="0.1"
                           class="form-control" style="display: inline; width: 180px;"
                           required="required" value="{{blood_sugar_level}}" οnkeyup="this.value=this.value.replace(/^\D*(\d*(?:\.\d{0,1})?).*$/g, '$1')"/>

              <span class="font-weight-bold" style="margin-left: 10px">1</span>
                    <input name="blood_sugar_level_slider" id="blood_sugar_level_slider" type="range" min="1" max="30" step="0.1"
                           class="slider" style="display: inline; width: 150px;"
                           required="required"/>
              <span class="font-weight-bold">30</span>
          </div>
        </fieldset>
            <br><br>
        </div>
        <fieldset style="margin-left:15%">
                     <legend style="font-size: 14;">Comment:</legend>
                    <input id="comment" type="text" style="width:300%">
                 </fieldset>
        <br/>

          <div class="container">
            <div class="wrapper">
            <table id="myTable1" class="normTbe model1 hide">
                <tbody>
                    <tr id="alonTr1" class="alonTr">
                        <td><input id="text1" type="text" value="" readonly></td>
                        <td><input id="text2" type="text" value="" readonly></td>
                        <td><input id="text3" type="text" value="" readonly></td>
                        <td><input id="text4" type="text" value="" readonly></td>
                        <td>
                            <a class="text_a" href="javascript:;" onclick="deltr(this)"><button type="button" class="btn btn-danger">Delete</button></a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="itemInfo">
                <table id="myTable" class="normTbe tabInfo">
                    <thead>
                        <tr>
                            <th style="width:25%;"><label for="category">Category</label></th>
                            <th style="width:25%;"><label for="description">Description</label></th>
                            <th style="width:25%;"><label for="portion">Portion</label></th>
                            <th style="width:10%;"><label for="quantity">Quantity</label></th>
                            <th style="width:15%;">Action</th>
                        </tr>
                    </thead>
                    <tbody class="tbody1">
                        <tr>
                            <td><select id="category" name="category" class="form-control" action="{% url 'ajax_load_description' %}">
                                <option value="">Choose One</option>
                                  {% for cat in category %}
                                    <option value="{{cat.id}}">{{cat.name}}</option>
                                  {% endfor %}
                                </select>
                            </td>

                            <td><select id="description" name="description" class="form-control" action="{% url 'ajax_load_portion' %}">
                                <option value="">Choose One</option>
                                  {% for desc in description %}
                                    <option value="{{desc.id}}">{{desc.name}}</option>
                                  {% endfor %}
                                </select>
                            </td>

                            <td><select id="portion" name="portion" class="form-control">
                                    <option value="">Choose One</option>
                                      {% for port in portion %}
                                        <option value="{{port.id}}">{{port.name}}</option>
                                      {% endfor %}
                                </select>
                            </td>

                            <td>
                                <input type="number"  id='quantity' min='1' onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}">
                            </td>
                            <td>
                                <a href="javascript:;" class="AddTr"><button type="button" class="btn btn-primary">Add</button></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div><!-- itemInfo -->
            </div>
        <br>
            <div style="text-align: center;">
                <br><br>
                <button name="submit" id="submit" type="submit" class="btn btn-success">Submit</button>
                <br><br>
          </div>
    </div>
</form>
        <!-- END: diary form -->


<!--         BEGIN: #footer-->
        <footer id="footer">
          <div class="container">

            <!-- BEGIN: .footer-subscribe -->
            <div class="row footer-subscribe">
              <div class="col-md-6">
                <h3 class="mt-2"></h3>
              </div>
              <div class="col-md-6">
              </div>
            </div>
            <!-- END: .footer-subscribe -->

            <div class="row">
              <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                <!-- BEGIN: .widget -->
                <div class="widget">
                  <h3>Our Motivation.</h3>
                </div>
                <!-- END: .widget -->
              </div>
              <div class="col-md-6 col-lg-3 mb-4 mb-md-0">

<!-- BEGIN: .widget -->
                <div class="widget">
                </div>
<!-- END: .widget -->

              </div>
              <div class="col-md-6 col-lg-3 mb-4 mb-md-0">

<!-- BEGIN: .widget -->
                <div class="widget">
                </div>
<!-- END: .widget -->

              </div>
              <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                <div class="d-block">
                </div>

              </div>
            </div>
            <p>Diatastic is a management tool created for diabetics, to help them manage their disability. Our website is intended to be an everyday companion for diabetics, giving them the motivation and tools necessary to live happy and healthy lives.</p>
            <p>Disclaimer: Diatastic only provides a recommendation on the insulin dosage. It should not overwrite any advice that was given to you by a medical professional.</p>
            <!-- BEGIN: .copyright -->
            <div class="row copyright">
              <div class="col-md-6 order-2 text-center text-md-right"><a href="#" class="js-top"><span class="icon-long-arrow-up mr-2"></span> Go to Top</a></div>

            </div>
            <!-- END: .copyright -->
          </div>
        </footer>
<!--         END: #footer -->

      </div>
      <!-- END: .site-wrap -->

      <!-- Loader -->
      <div id="site-overlayer"></div>
      <div class="site-loader-wrap">
        <div class="site-loader"></div>
      </div>
</body>
      <!-- BEGIN: JavaScripts -->
<script src="/static/js/jquery-3.4.1.min.js"></script>
<script src="/static/js/popper.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/jquery.waypoints.min.js"></script>
<script src="/static/js/jquery.animateNumber.min.js"></script>
<script src="/static/js/tiny-slider.js"></script>
<script src="/static/js/jquery.fancybox.min.js"></script>
<script src="/static/js/jquery.lavalamp.min.js"></script>
<script src="/static/js/jquery.ajaxchimp.min.js"></script>
<script src="/static/js/jquery.validate.min.js"></script>
<script src="/static/js/jquery.easing.1.3.js"></script>
<script src="/static/js/main.js"></script>
<script src="/static/js/select.js"></script>
<script src="/static/js/defaultDateSetter.js"></script>

<!--   Core JS Files   -->
<script src="/static/assets/plugins/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
<script src="/static/assets/plugins/backstretch/backstretch.js" type="text/javascript"></script>
<script src="/static/assets/js/app.js"></script>

<!-- Blood Sugar Levels slider -->
<script src="/static/js/range_slider.js"></script>

<!-- Dependent Dropdowns -->
<script src="/static/js/description.js"></script>
<script src="/static/js/portion.js"></script>

<!-- Submitting Entries -->
<script src="/static/js/add_to_cart.js"></script>
<script src="/static/js/send_cart.js"></script>
      <!-- END: JavaScripts -->
<style>
    table {
        width: 120%;
        margin: 10px 0 0 -10%;
    }

    input, button, select, textarea {
        outline: none;
        resize: none;
        padding: 3px 5px;
        border: 1px solid #ddd;
    }

        input:focus, textarea:focus {
            border: 1px solid #9ab6d6;
        }

    .whiteBg {
        background: #fff;
    }

    .normTbe {
        border-left: 1px solid #ddd;
        border-top: 1px solid #ddd;
    }

        .normTbe td, .normTbe th {
            border-bottom: 1px solid #ddd;
            border-right: 1px solid #ddd;
            padding: 15px;
            text-align: center;
        }

        .normTbe input {
            width: 80%;
            text-align: center;
        }

    .wrapper {
        width: 82.6%;
        padding: 0 20px;
        margin:0 auto;
        clear: both;
    }

    .hide {
        display: none;
    }

    .hideTr {
        background: #ddd;
    }


    .btn_a1 {
        padding-top: 15px;
    }

        .btn_a1 a {
            display: inline-block;
            *display: inline;
            *zoom: 1;
            width: 120px;
            line-height: 45px;
            background: #50abfd;
            color: #fff;
        }

        .btn_a1 .addtr2, .btn_a1 .dtadd {
            background: #ff9900;
        }

fieldset {
  width: max-content;
}

legend {
  font-size: 12px;
}

#exampleDataList {
  width: 15rem;
  border: none;
}

#exampleDataList:focus {
  outline: none;
}
</style>
{% endblock %}
{% else %}
<script type="text/javascript">
    window.location.href = "/please_login/";
</script>
{% endif %}
